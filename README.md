# 网站请求路径抓取器

一个基于 Chrome 扩展（Manifest V3）的网络请求捕获工具，用来**实时查看当前网页发起的所有网络请求**，包括请求方法、URL、状态码、请求头、请求参数以及响应头等信息，适合前端/后端调试接口使用。

> 注意：本扩展**只做请求捕获和展示，不修改、不拦截、不篡改任何请求或响应内容**。

---

## 功能介绍

- 捕获当前浏览器中页面发起的 HTTP/HTTPS 请求  
- 显示每条请求的：
  - 请求方法（GET/POST/PUT/DELETE/PATCH 等）
  - 请求 URL
  - 状态码（2xx/3xx/4xx/5xx 高亮显示）
  - 请求发起时间、类型（xhr、fetch、script、image 等）
  - 请求头（Request Headers）
  - 请求参数（表单、JSON 或 URL Query 参数）
  - 响应头（Response Headers）
- 支持按 URL 关键字过滤、按请求方法筛选（GET/POST/...）
- 支持点击单条请求展开详情，查看多个标签页：
  - **概览**：关键信息总结
  - **请求头**：所有请求头键值
  - **请求参数**：表单参数 / JSON / Query 参数
  - **响应**：响应头及响应体（如有）
- 支持一键复制请求地址
- 支持将捕获到的请求数据导出为 JSON 文件
- 支持在暂停/关闭弹窗后，保留历史捕获记录（数据存储在 `chrome.storage.local` 中）

---

## 安装方法（开发者模式加载）

由于这是本地扩展，请通过 Chrome 开发者模式进行加载：

1. 打开 Chrome 浏览器，访问：`chrome://extensions/`  
2. 在右上角打开 **开发者模式**（Developer mode）开关  
3. 点击左上角 **“加载未打包的扩展程序”**（Load unpacked）  
4. 选择本项目所在文件夹，即包含以下文件的目录：
   - `manifest.json`
   - `background.js`
   - `popup.html`
   - `popup.js`
   - `icon.png`
5. 加载成功后，工具栏会出现本扩展的图标

如果没有自动固定在工具栏，可以在扩展列表中点击“图钉”将其固定。

---

## 使用说明

1. **打开需要调试的网页**
   - 例如有些网站无法打开控制台，但是你又想查看该网站的网络请求的页面

2. **点击扩展图标，打开弹窗**
   - 弹窗顶部显示标题“网站请求路径抓取器”和一排控制按钮。

3. **开始捕获请求**
   - 点击 **“开始捕获”** 按钮：
     - 按钮文字会变为“正在捕获...”
     - 按钮置灰不可点击，**“暂停捕获”** 按钮可用
   - 此时刷新网页或进行一些操作（如点击按钮、提交表单），扩展会持续监听并记录所有网络请求。

4. **查看请求列表**
   - 中间的列表区域会不断出现新请求：
     - 左侧彩色方块标记请求方法（GET/POST/PUT/DELETE/PATCH 等）
     - 中间显示请求 URL（过长会自动省略）
     - 右侧显示状态码，并按状态段（2xx/3xx/4xx/5xx）用不同颜色展示
   - 若暂无数据，会显示“暂无捕获的请求”提示。

5. **使用过滤和筛选**
   - 顶部有两个过滤控件：
     - **URL 关键字过滤输入框**：输入任意字符串，实时筛选 URL 中包含该关键字的请求
     - **请求方法下拉框**：选择 GET/POST/PUT/DELETE/PATCH 或“所有方法”  
   - 两者可以组合使用，比如只看 URL 中包含 `/api/user` 的 POST 请求。

6. **查看某一条请求详情**
   - 在列表中点击任意一条请求：
     - 该条请求会高亮显示，并在下方展开一个详情面板
   - 详情面板包含：
     - 顶部右侧一个 **“复制请求地址”** 按钮
     - 四个标签页：
       - **概览**：方法、URL、类型、状态码、时间、请求 ID、请求头/参数/响应头数量等
       - **请求头**：以“Header-Name: value”格式列出所有请求头
       - **请求参数**：
         - 若是表单或 JSON，会按 key:value 形式列出
         - 若为字符串或无法解析的内容，会直接显示原始数据
       - **响应**：
         - 响应头列表
         - 若有响应体（并被扩展捕获到），会展示响应体内容（JSON 会格式化为缩进文本）
   - 再次点击列表中同一条请求，可收起详情面板。

7. **复制请求地址**
   - 在详情面板右上角点击 **“复制请求地址”** 按钮：
     - 会将当前请求的 URL 复制到剪贴板
     - 按钮会短暂显示“已复制”，方便确认。

8. **暂停捕获**
   - 点击 **“暂停捕获”** 按钮：
     - 扩展将停止继续监听新的请求
     - 已经捕获到的请求会保留在列表中，可继续查看和导出
   - 再次点击 **“开始捕获”** 可以重新开始。

9. **清空列表**
   - 点击 **“清空列表”**：
     - 当前弹窗中的请求列表会被清空
     - 本地存储中的 `capturedRequests` 也会被清空
   - 用于重新开始一次干净的抓取。

10. **导出数据**
    - 点击 **“导出数据”** 按钮：
      - 会将当前所有捕获请求打包为一个 JSON 文件
      - 文件名形如：`requests_2024-11-21T14-30-00.json`
      - 可以导入到其他工具分析，或提交给后端排查问题。

---

## 权限说明

本扩展在 `manifest.json` 中声明了以下权限：

- `webRequest` / `webRequestBlocking`：用于监听浏览器发起的网络请求并读取请求信息  
- `activeTab`：访问当前活动标签页的相关信息  
- `storage`：使用 `chrome.storage.local` 存储捕获的请求记录  
- `host_permissions: <all_urls>`：允许在所有站点上监听网络请求（否则无法抓全请求）

> 本扩展不会向任何远程服务器上传数据，所有请求信息仅存储在本地浏览器中，主要用于开发调试。

---

## 注意事项

- 扩展只在浏览器层面监听请求，不会改变请求内容和响应结果。  
- 某些情况下（如 HTTPS、浏览器安全策略限制等），可能无法获取到完整的请求体或响应体。  
- 为避免内存占用过高，扩展默认只保留最近 **200 条** 请求记录，超出部分会自动丢弃旧数据。  
- 若你发现某些请求没有被捕获，可能是页面自身使用了非标准方式发起请求，或浏览器版本、权限限制导致。

---

## 开发者提示

如果你希望修改或扩展本插件功能：

- 主要逻辑入口：
  - 背景脚本：`background.js`（真正监听并收集请求数据）
  - 弹窗页面：`popup.html`（界面布局与样式）
  - 弹窗逻辑：`popup.js`（列表渲染、过滤、详情展示、导出等）
- 可以在 `chrome://extensions/` 中勾选“允许访问文件 URL”，方便调试本地页面请求。  
- 修改代码后，记得在扩展管理页点击“重新加载”以生效。

